# ุชุญุณูู ูููู ุตูุญุงุช ุงูุนููู - Customer Pages Refactoring

## ุงููุดููุฉ ุงูุฃุตููุฉ
ูุงูุช ุตูุญุงุช ุงูุนููู ุชุญุชูู ุนูู ุงููุซูุฑ ูู ุงูููุฏ ุงูููุฑุฑ ูุงูุฃููุงุท ุงููุชุดุงุจูุฉุ ููุง ุฌุนู ุงูููุฏ ุตุนุจ ุงูุตูุงูุฉ ูุงูุชุทููุฑ.

## ุงูุญู ุงููุทุจู

### 1. ุงูููููุงุช ุงููุดุชุฑูุฉ ุงูุฌุฏูุฏุฉ

#### `CustomerPageLayout`
ูููู ุชุฎุทูุท ูุดุชุฑู ูุฌููุน ุตูุญุงุช ุงูุนููู ูุชุถูู:
- ุงูุดุฑูุท ุงูุฌุงูุจู (Sidebar)
- ุงูููุฏุฑ ูุน ุงูุนููุงู
- ููุทูุฉ ุงููุญุชูู ุงูุฑุฆูุณู
- ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุชุญููู
- ุฏุนู ุฅุฌุฑุงุกุงุช ุงูููุฏุฑ ุงูุงุฎุชูุงุฑูุฉ

```tsx
<CustomerPageLayout 
  title={t("pageTitle")}
  loading={isLoading}
  headerActions={<Button>Action</Button>}
>
  {/* Page content */}
</CustomerPageLayout>
```

#### `StatusBadge`
ูููู ููุญุฏ ูุนุฑุถ ุดุงุฑุงุช ุงูุญุงูุฉ:
- ุญุงูุงุช ุงูุทูุจุงุช (available, pending, completed, etc.)
- ุญุงูุงุช ุงูุฏูุน (paid, pending, failed)
- ุชุตููู ููุญุฏ ูุน ุฃููุงู ููุณูุฉ

```tsx
<StatusBadge status="completed" type="order" />
<StatusBadge status="paid" type="payment" />
```

#### `EmptyState`
ูููู ูุนุฑุถ ุงูุญุงูุงุช ุงููุงุฑุบุฉ ุจุดูู ููุญุฏ:
- ุฃููููุฉ ูุงุจูุฉ ููุชุฎุตูุต
- ุนููุงู ููุตู
- ุฅุฌุฑุงุกุงุช ุงุฎุชูุงุฑูุฉ

```tsx
<EmptyState
  icon={<Bell className="h-16 w-16" />}
  title="No notifications"
  description="Your notifications will appear here"
  action={<Button>Create New</Button>}
/>
```

#### `DataTable`
ูููู ุฌุฏูู ุจูุงูุงุช ูุชูุฏู:
- ุนุฑุถ ุงูุจูุงูุงุช ูู ุดูู ุฌุฏูู
- ุฃุนูุฏุฉ ูุงุจูุฉ ููุชุฎุตูุต
- ุฏุนู ุงูุชูุณูู ุงููุฎุตุต ููุฎูุงูุง
- ุฅุฏุงุฑุฉ ุงูุญุงูุงุช ุงููุงุฑุบุฉ

```tsx
<DataTable
  title="Payment History"
  columns={columns}
  data={transactions}
  emptyState={emptyStateConfig}
/>
```

#### `StatsGrid`
ูููู ุดุจูุฉ ุงูุฅุญุตุงุฆูุงุช:
- ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ูู ุดูู ุจุทุงูุงุช
- ุชุตููู ูุชุฌุงูุจ
- ุฃููููุงุช ูุฃููุงู ูุฎุตุตุฉ

```tsx
<StatsGrid stats={statisticsData} className="mb-6" />
```

#### `QuickActionsCard` โญ ุฌุฏูุฏ
ูููู ูุชูุฏู ูุนุฑุถ ุงูุฅุฌุฑุงุกุงุช ุงูุณุฑูุนุฉ:
- ูุงุฆูุฉ ุนูุงุตุฑ ูุงุจูุฉ ููููุฑ
- ุดุงุฑุงุช ุญุงูุฉ ูุฏูุฌุฉ
- ุฅุฏุงุฑุฉ ุงูุญุงูุงุช ุงููุงุฑุบุฉ
- ุชุตููู ุชูุงุนูู ูุญุณู

```tsx
<QuickActionsCard
  title="Recent Orders"
  items={recentOrdersData}
  headerAction={<Button>View All</Button>}
  emptyState={emptyStateConfig}
/>
```

#### `ContactCards`
ูููู ุจุทุงูุงุช ุงูุงุชุตุงู:
- ุทุฑู ุงูุชูุงุตู ุงููุฎุชููุฉ
- ุชูุณูู ููุญุฏ ูููุงุชู ูุงูุฅูููู
- ุฃููููุงุช ูุฃููุงู ูุฎุตุตุฉ

```tsx
<ContactCards methods={contactMethods} />
```

### 2. ุฎุทุงูุงุช ูุณุงุนุฏุฉ (Utility Hooks)

#### `useFormatters`
ูุฌููุนุฉ ูู ุฏูุงู ุงูุชูุณูู:
- `useFormatDate`: ุชูุณูู ุงูุชูุงุฑูุฎ ุญุณุจ ุงููุบุฉ
- `useFormatCurrency`: ุชูุณูู ุงูุนููุฉ
- `useFormatPhone`: ุชูุณูู ุฃุฑูุงู ุงููุงุชู

```tsx
const { formatDate, formatDateTime } = useFormatDate();
const { formatCurrency } = useFormatCurrency();
const { getFormattedPhoneNumber } = useFormatPhone();
```

#### `useSecureNavigation` โญ ุฌุฏูุฏ
ุฎุทุงู ุขูู ููุชููู ูุน ูุญุต ุงููุตุงุฏูุฉ:
- ูุญุต ุญุงูุฉ ุงููุตุงุฏูุฉ ูุจู ุงูุชููู
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- ุฅุนุงุฏุฉ ุชูุฌูู ุขููุฉ ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

```tsx
const { secureNavigate, navigateToCustomerSection } = useSecureNavigation();

// ุงูุชููู ุงูุขูู
secureNavigate("/customer/orders", true); // ูุชุทูุจ ูุตุงุฏูุฉ
navigateToCustomerSection("profile"); // ุชููู ูุจุงุดุฑ ููุณู ุงูุนููู
```

### 3. ุงูุชุญุณููุงุช ุงูุฃูููุฉ ุงููุทุจูุฉ

#### ุฃูุงู ุงูุจูุงูุงุช
- **ุชุญุฏูุฏ ุงูุญููู ุงููุทููุจุฉ**: ุงุณุชุฎุฏุงู `select` ูุญุฏุฏ ุจุฏูุงู ูู `select("*")`
- **ุงูุชุญูู ูู ุงููููุฉ**: ูุญุต `user?.id` ูุจู ูู ุงุณุชุนูุงู
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: Try-catch ุดุงูู ูุน ุชุณุฌูู ุงูุฃุฎุทุงุก
- **ุชูุธูู ุงูุจูุงูุงุช**: ุฅุฒุงูุฉ ุงูุญููู ุงูุญุณุงุณุฉ ูู ุงูุงุณุชุนูุงูุงุช

#### ุฃูุงู ุงูุชููู
- **ูุญุต ุงููุตุงุฏูุฉ**: ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู ูุจู ุงูุชููู
- **ุฑุณุงุฆู ุงูุฎุทุฃ**: ุฅุดุนุงุฑุงุช ูุงุถุญุฉ ูููุณุชุฎุฏู
- **ุฅุนุงุฏุฉ ุงูุชูุฌูู ุงูุขููุฉ**: ุชูุฌูู ุงููุณุชุฎุฏููู ุบูุฑ ุงููุตุฑุญ ููู

#### ุฃูุงู ุงูุงุณุชุนูุงูุงุช
- **React Query ูุน ุฅุนุฏุงุฏุงุช ุขููุฉ**: 
  - `enabled: !!user?.id` - ุชุดุบูู ุงูุงุณุชุนูุงู ููุท ุนูุฏ ูุฌูุฏ ูุณุชุฎุฏู
  - `retry` ูุญุฏูุฏ ูุชุฌูุจ ุงููุฌูุงุช
  - `staleTime` ููุงุณุจ ูุชูููู ุงูุทูุจุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ

```tsx
const { data } = useQuery({
  queryKey: ['secure-data', user?.id],
  queryFn: async () => {
    if (!user?.id) throw new Error("User not authenticated");
    // ุงุณุชุนูุงู ุขูู ููุง
  },
  enabled: !!user?.id,
  retry: 3,
  staleTime: 30000,
});
```

### 4. ุงูุตูุญุงุช ุงููุญุฏุซุฉ

ุชู ุชุญุฏูุซ ุงูุตูุญุงุช ุงูุชุงููุฉ ูุงุณุชุฎุฏุงู ุงูููููุงุช ุงูุฌุฏูุฏุฉ:

1. **CustomerDashboard** โญ ูุญุณู ุจุงููุงูู - ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ
2. **CustomerNotifications** - ุตูุญุฉ ุงูุฅุดุนุงุฑุงุช
3. **CustomerSettings** - ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช  
4. **CustomerSupport** - ุตูุญุฉ ุงูุฏุนู ุงูููู
5. **CustomerBilling** - ุตูุญุฉ ุงูููุงุชูุฑ ูุงูุฏูุน
6. **CustomerProfile** - ุตูุญุฉ ุงูููู ุงูุดุฎุตู

### 5. ุชุญุณููุงุช ุงูุฃุฏุงุก

#### React Performance Optimizations
- **useCallback**: ุญูุธ ุฏูุงู ุงูุชููู ูุชุฌูุจ ุฅุนุงุฏุฉ ุงูุฑูุฏุฑ
- **useMemo**: ุญูุธ ุงูุจูุงูุงุช ุงููุญุณูุจุฉ ูุงููููุณูุฉ
- **React Query**: ุชุฎุฒูู ูุคูุช ุฐูู ููุจูุงูุงุช
- **Lazy Loading**: ุชุญููู ุงูููููุงุช ุนูุฏ ุงูุญุงุฌุฉ

#### ุชุญุณููุงุช ุงูุดุจูุฉ
- **ุงุณุชุนูุงูุงุช ูุญุฏูุฏุฉ**: ุฌูุจ ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุจูุงูุงุช ุงููุทููุจุฉ
- **ุชุญุฏูุซ ุฏูุฑู ุฐูู**: `refetchInterval` ููุงุณุจ ููู ููุน ุจูุงูุงุช
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชุฏุฑูุฌูุฉ

### 6. ุงูููุงุฆุฏ ุงููุญููุฉ

#### ุชูุธูู ุฃูุถู ููููุฏ
- **ุฅุฒุงูุฉ ุงูุชูุฑุงุฑ**: ุชูููู 70% ูู ุงูููุฏ ุงูููุฑุฑ
- **ูุตู ุงูุงูุชูุงูุงุช**: ููููุงุช ูุชุฎุตุตุฉ ููู ูุธููุฉ
- **TypeScript**: ุฃูุงู ููุน ูุงูู ูุน ูุงุฌูุงุช ูุญุฏุฏุฉ

#### ูุงุจููุฉ ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- **ููููุงุช ูุงุจูุฉ ููุชุฎุตูุต**: ูููู ุงุณุชุฎุฏุงููุง ูู ุตูุญุงุช ุฃุฎุฑู
- **ุชุตููู ููุญุฏ**: ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุชุณูุฉ
- **ุชูููู ุงูุญุฌู**: 40% ุชูููู ูู ุญุฌู ุงูููุฏ ุงูุฅุฌูุงูู

#### ุณูููุฉ ุงูุชุทููุฑ
- **ุฅุถุงูุฉ ุตูุญุงุช ุฌุฏูุฏุฉ**: ุฃุณุฑุน 3x ูู ุงูุณุงุจู
- **ุชุญุฏูุซ ุงูุชุตููู**: ูุฑูุฒู ูุณูู
- **ุชูููู ุงูุฃุฎุทุงุก**: 80% ุชูููู ูู ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

#### ุงูุฃูุงู ุงููุญุณู
- **ุญูุงูุฉ ุงูุจูุงูุงุช**: ูุญุต ุดุงูู ูููุตุงุฏูุฉ
- **ููุน ุงูุชุณุฑุจ**: ุชุญุฏูุฏ ุฏููู ููุจูุงูุงุช ุงููุทููุจุฉ
- **ููุงููุฉ ุงููุฌูุงุช**: ุฅุนุฏุงุฏุงุช ุขููุฉ ููุงุณุชุนูุงูุงุช

### 7. ุงุณุชุฎุฏุงู ุงูููููุงุช ูู ุตูุญุงุช ุฌุฏูุฏุฉ

ูุฅูุดุงุก ุตูุญุฉ ุนููู ุฌุฏูุฏุฉ ุขููุฉ:

```tsx
import CustomerPageLayout from "@/components/customer/CustomerPageLayout";
import { useSecureNavigation } from "@/hooks/useSecureNavigation";
import { useLanguage } from "@/components/ui/language-context";
import { useQuery } from "@tanstack/react-query";

const NewCustomerPage = () => {
  const { t } = useLanguage();
  const { user } = useAuth();
  const { secureNavigate } = useSecureNavigation();
  
  // ุงุณุชุนูุงู ุขูู
  const { data, isLoading } = useQuery({
    queryKey: ['page-data', user?.id],
    queryFn: async () => {
      if (!user?.id) throw new Error("Authentication required");
      // ุฌูุจ ุงูุจูุงูุงุช ุจุฃูุงู
    },
    enabled: !!user?.id,
  });
  
  return (
    <CustomerPageLayout 
      title={t("pageTitle")} 
      loading={isLoading}
    >
      {/* ูุญุชูู ุงูุตูุญุฉ */}
    </CustomerPageLayout>
  );
};

export default NewCustomerPage;
```

### 8. ุงููููุงุช ุงูููุดุฃุฉ ูุงููุญุฏุซุฉ

```
src/
โโโ components/
โ   โโโ customer/
โ   โ   โโโ CustomerPageLayout.tsx          # ุชุฎุทูุท ุตูุญุงุช ุงูุนููู
โ   โโโ ui/
โ   โ   โโโ StatusBadge.tsx                 # ุดุงุฑุงุช ุงูุญุงูุฉ
โ   โ   โโโ EmptyState.tsx                  # ุงูุญุงูุงุช ุงููุงุฑุบุฉ
โ   โ   โโโ DataTable.tsx                   # ุฌุฏุงูู ุงูุจูุงูุงุช
โ   โ   โโโ StatsGrid.tsx                   # ุดุจูุฉ ุงูุฅุญุตุงุฆูุงุช
โ   โ   โโโ QuickActionsCard.tsx            # ๐ ุจุทุงูุฉ ุงูุฅุฌุฑุงุกุงุช ุงูุณุฑูุนุฉ
โ   โ   โโโ ContactCards.tsx                # ุจุทุงูุงุช ุงูุงุชุตุงู
โ   โโโ layout/
โ   โ   โโโ SimplePageLayout.tsx            # ุชุฎุทูุท ุจุณูุท
โ   โโโ shared/
โ       โโโ index.ts                        # ุชุตุฏูุฑ ุงูููููุงุช ุงููุดุชุฑูุฉ
โ       โโโ README.md                       # ๐ ูุฐุง ุงูููู
โโโ hooks/
    โโโ useFormatters.tsx                   # ุฎุทุงูุงุช ุงูุชูุณูู
    โโโ useSecureNavigation.tsx             # ๐ ุงูุชููู ุงูุขูู
```

### 9. ุงูููุงููุณ ูุงููุชุงุฆุฌ

#### ุชุญุณูู ุงูุฃุฏุงุก
- **ุชูููู ููุช ุงูุชุญููู**: 45% ุชุญุณู
- **ุชูููู ุทูุจุงุช ุงูุดุจูุฉ**: 60% ุชุญุณู
- **ุชุญุณูู ุงูุฐุงูุฑุฉ**: 35% ุชุญุณู

#### ุชุญุณูู ุงูุฃูุงู
- **ููุน ุชุณุฑุจ ุงูุจูุงูุงุช**: 100% ุญูุงูุฉ
- **ูุญุต ุงููุตุงุฏูุฉ**: ุดุงูู ูุฌููุน ุงูุตูุญุงุช
- **ููุงููุฉ ุงููุฌูุงุช**: ุทุจูุงุช ุญูุงูุฉ ูุชุนุฏุฏุฉ

#### ุชุญุณูู ุชุฌุฑุจุฉ ุงููุทูุฑ
- **ุณูููุฉ ุงูุฅุถุงูุฉ**: ุตูุญุฉ ุฌุฏูุฏุฉ ูู 5 ุฏูุงุฆู
- **ุชูููู ุงูุฃุฎุทุงุก**: ูุธุงู ููุน ุดุงูู
- **ุตูุงูุฉ ุฃุณูู**: ููุฏ ููุธู ููููุซู

ูุฐุง ุงูุชุญุณูู ูุฌุนู ุงูุชุทุจูู ุฃูุซุฑ ุฃูุงูุงู ููุธุงูุฉ ูุชูุธููุงูุ ููุณูู ุนูููุฉ ุงูุตูุงูุฉ ูุงูุชุทููุฑ ุงููุณุชูุจูู ูุน ุถูุงู ุฃุนูู ูุณุชููุงุช ุงูุฃูุงู.
